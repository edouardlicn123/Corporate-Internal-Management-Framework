{# includes/style.html
   =============================================================================
   作用：统一管理所有 CSS 文件的 <link> 引入
   
   加载顺序（重要）：
   1. Bootstrap CSS          → 基础组件、网格、工具类
   2. Bootstrap Icons        → 图标字体，与 Bootstrap 风格一致
   3. 项目自定义 CSS (custom.css) → 包含 base.css、通用覆盖规则
   4. 用户选择的主题 CSS     → 所有颜色、圆角、阴影、hover 等视觉细节来源
   
   注意事项：
   - 所有页面都会继承 base.html，因此这里集中加载全局样式
   - 主题文件动态加载：优先使用当前用户设置的主题，无则 fallback 到 default.css
   - 如需额外图标库（Font Awesome 等），可在此添加
   ============================================================================= #}

<!-- Bootstrap 5 CSS (CDN) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous">

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<!-- 项目自定义基础 CSS（布局无关的覆盖、工具类等） -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">

<!-- 动态加载用户选择的主题 CSS（颜色、圆角、阴影、hover 等全部来源） -->
{% if current_user.is_authenticated and current_user.theme %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/themes/' + current_user.theme + '.css') }}">
{% else %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/themes/default.css') }}">
{% endif %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/frame.css', _external=True) }}?v={{ '' | timestamp }}">

<!-- 子模板可在此注入额外的 <link>、<meta> 或 <style> -->
{% block head_extra %}{% endblock %}
